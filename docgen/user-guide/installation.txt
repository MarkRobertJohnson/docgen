Overview
--------

- Download the **[latest released version](https://github.com/mtmacdonald/docgen)** and save it anywhere, e.g. the Desktop.

> The first time DocGen is used some dependencies (listed below) must be installed. For help, see the setup instructions on this page.

- [Ruby](http://www.ruby-lang.org/en/) **1.9.x or newer**
- [Kramdown RubyGem](http://kramdown.rubyforge.org/) **0.10.0 or newer**
- [Nokogiri RubyGem](http://nokogiri.org/) **1.4.4.1 or newer** 
- [Kwalify RubyGem](http://www.kuwata-lab.com/kwalify/) **0.7.2 or newer**
- [Systemu RubyGem](https://github.com/ahoward/systemu) **2.2.0 or newer**
- [wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/) **0.9.9 or newer**

Setup - Microsoft Windows
-------------------------

Download and run the following installers:

* [Windows Ruby installer](https://rubyforge.org/frs/?group_id=167) (select *'Add Ruby executables to your PATH'* and *'Associate .rb and .rbw files with this Ruby installation'*)
* [Windows wkhtmltopdf installer](http://code.google.com/p/wkhtmltopdf/downloads/list) (select *'Modify PATH'*)

Open the Windows Command Prompt and enter the following commands. (See [help with proxy settings](#troubleshooting) in case of network errors).

	gem install kramdown
	gem install nokogiri
	gem install kwalify
	gem install systemu

> The latest version of systemu is only compatible with Ruby 1.9.3 on Windows. For older Ruby versions, install systemu 2.2.0 by instead entering: **gem install systemu --version '=2.2.0'**
	
Confirm correct wkhtmltopdf installation by entering the following. (See [help with wkhtmltopdf path](#troubleshooting) in case of 'not recognised' errors).

	wkhtmltopdf --version
	
Setup - Linux
-------------

Normally a suitable version of Ruby is already installed. Check this by opening a terminal and entering:

	ruby -v

If Ruby is not installed or the version is too old, follow the [installing or upgrading Ruby](#troubleshooting) help. 	

Then, in the terminal, enter the following commands. (See [help with proxy settings](#troubleshooting) in case of network errors).

	sudo gem install kramdown
	sudo gem install kwalify
	sudo gem install systemu
	sudo apt-get install libxslt-dev libxml2-dev
	sudo gem install nokogiri

Download the [wkhtmltopdf Linux static binary](http://code.google.com/p/wkhtmltopdf/downloads/list) to your desktop. If needed, rename it to **wkhtmltopdf** (i.e. remove version suffix). In the terminal, enter:

	sudo cp Desktop/wkhtmltopdf /usr/local/bin
	sudo chmod 755 /usr/local/bin/wkhtmltopdf

Setup - Apple OS X
------------------	

OS X already has Ruby, but you probably need to [upgrade the Ruby version](#troubleshooting). To check the version, open a terminal and enter:

	ruby -v

After upgrading, enter the following commands in the terminal. (See [help with proxy settings](#troubleshooting) in case of network errors).

	sudo gem install kramdown
	sudo gem install nokogiri
	sudo gem install kwalify
	sudo gem install systemu

Download the [wkhtmltopdf OS X static binary](http://code.google.com/p/wkhtmltopdf/downloads/list) to your desktop. If needed, rename it to **wkhtmltopdf** (i.e. remove version suffix). In the terminal, enter:

	sudo cp Desktop/wkhtmltopdf /usr/local/bin
	sudo chmod 755 /usr/local/bin/wkhtmltopdf

OS X additionally needs to have **/usr/local/bin** added to the PATH. In the terminal, enter:

	pico ~./bash_profile

Add the following line to the file. Save it and exit pico using the on-screen instructions (i.e. CTRL+O then CTRL+X)

	export PATH=/usr/local/bin:/usr/local/sbin:$PATH

In ther terminal, enter:

	source ~/.bash_profile

Test the installation
---------------------

Run DocGen to test the installation. Use the Command Prompt on Windows or the terminal on Linux / OS X and enter (substituting the correct path):

	cd /path/to/DocGen/Generator
	ruby Generator.rb

Now open **documentation.html** in the DocGen Output folder. If everything is working, you will see an empty template website. If there were problems, see troubleshooting (below).

<a name="troubleshooting"></a>

Troubleshooting
---------------

<p class="false-heading">Help with proxy settings when installing Ruby gems</p>

When behind a proxy, add the option **-p proxy_url**. For example:

	gem install kramdown -p http://<IP>:8080

Alternatively, **[download the gems](http://rubygems.org/)** manually and install them from a local directory (using the normal instructions above).

<p class="false-heading">Help with wkhtmltopdf path issues (Windows only)</p>

The wkhtmltopdf 0.9.9 installer does not have an option to add wkhtmltopdf to the PATH environment variable. Instead:

* either use wkhtmltopdf 0.10.0 or later (recommended)
* or manually add wkhtmltopdf.exe to the PATH environment variable: (My Computer \| Properties \| Advanced \| Environment Variables).

<p class="false-heading">Missing Nokogiri dependencies (Linux and OS X)</p>

The Nokogiri RubyGem requires libxml2 and libxslt on Linux and OS X. Usually these are already present. If not, follow:

- [detailed instructions for installing nokogiri](http://nokogiri.org/tutorials/installing_nokogiri.html)

<p class="false-heading">Installing or upgrading Ruby (Linux and OS X)</p>

> These instructions install a fresh copy of the latest stable Ruby and make it the default interpreter. Existing vendor Ruby installations are unaffected.

* download and unzip the [Ruby source code](http://www.ruby-lang.org/en/downloads/)
* (OS X only) install [XCode](http://developer.apple.com/technologies/tools/xcode.html) if not already present

To make and install Ruby, open a terminal and enter (substituting the correct path):

	cd /path/to/ruby-download
	autoconf
	./configure --prefix=/usr/local --enable-shared
	make
	sudo make install

<p class="false-heading">Extra help for Debian Linux</p>

Make sure these packages are installed *before* configuring Ruby:

- build-essential
- libssl-dev
- libreadline5
- libreadline5-dev
- zlib1g
- zlib1g-dev